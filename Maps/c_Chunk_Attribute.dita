<?xml version="1.0"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "dtd/concept.dtd">
<concept xml:lang="en" id="D9376" status="new"> 
  <title>The 
	 <synph>chunk</synph> attribute</title> 
  <shortdesc>The 
	 <synph>chunk</synph> attribute can control the way output files are
	 generated during the publishing process. Most 
	 <synph>chunk</synph> attribute values apply only to composite topics, which
	 should be avoided. The to-content value is used to generate a single output
	 topic from multiple DITA source topics. 
  </shortdesc> 
  <prolog><author>Tony Self</author><metadata><keywords><indexterm>composite
			 topics</indexterm><indexterm>ditabase</indexterm><indexterm>chunk
			 attribute</indexterm><indexterm>attributes<indexterm>chunk</indexterm></indexterm><indexterm>topicref
			 element</indexterm><indexterm>elements<indexterm>topicref</indexterm></indexterm><indexterm>chunking</indexterm></keywords></metadata>
  </prolog> 
  <conbody> 
	 <p>The ditamap's 
		<synph>topicref</synph> element includes a 
		<synph>chunk</synph> attribute that can be used to aggregate source DITA
		topics during processing to a deliverable document. 
	 </p> 
	 <p>Setting the 
		<synph>chunk</synph> attribute effectively overrides the default
		processing of the publishing tool. As well as specifying that multiple DITA
		topics be generated as single output topics, the 
		<synph>chunk</synph> attribute can also be used to specify that single
		DITA topics be split on output into multiple output topics. 
	 </p> 
	 <p>The 
		<synph>chunk</synph> attribute is also available on the 
		<synph>map</synph> element; values set will apply to all the topics in
		the ditamap. 
	 </p> 
	 <p>The 
		<synph>chunk</synph> attribute is only ever applied to a parent node 
		<synph>topicref</synph> element or a 
		<synph>map</synph> element, and its value applies to the parent and its
		child topics. 
	 </p> 
	 <p>The 
		<synph>chunk</synph> attribute has up to three parts, or 
		<term>tokens</term>, each separated by a space. For example, an attribute
		coded as 
		<codeph>chunk="select-topic to-content"</codeph> has two tokens; 
	 <option>select-topic</option> and 
	 <option>to-content</option>. 
	 </p> 
	 <p>There are three categories of tokens: 
	 <dl> 
		<dlentry> 
		  <dt>Selection tokens 
		  </dt> 
		  <dd>Selection tokens are only used for identifying nested topics within
			 a composite ditabase topic, so that the chunking policy can be applied to an
			 individual nested topic (<option>select-topic</option>), a family of nested
		  topics (<option>select-branch</option>), or the entire composite topic
		  (<option>select-document</option>). 
		  </dd> 
		</dlentry> 
		<dlentry> 
		  <dt>Policy tokens 
		  </dt> 
		  <dd>Policy tokens specify whether the referenced topics should be split
			 (<option>by-topic</option>) or merged (<option>by-document</option>). 
		  </dd> 
		</dlentry> 
		<dlentry> 
		  <dt>Rendering tokens 
		  </dt> 
		  <dd>Rendering tokens specify whether the referenced topics should be
			 generated as a single topic (<option>to-content</option>), or whether they
		  should be generated as separate topics but with just one entry in the table of
		  contents (<option>to-navigation</option>). 
		  </dd> 
		</dlentry> 
	 </dl> 
	 </p> 
	 <p>As an example, a portion of a ditamap with a structure of: 
		<codeblock>&lt;topicref href="c_safety.dita" chunk="to-content"&gt; 
  &lt;topicref href="c_electronic_brake_force_distribution.dita"  /&gt; 
  &lt;topicref href="t_child_restraint.dita" /&gt; 
  &lt;topicref href="c_other_restraint_systems.dita" /&gt;
&lt;/topicref&gt;</codeblock>will be output as one single HTML topic, with a file name of 
		<filepath>c_safety.html</filepath>. 
	 </p> 
	 <note>With the exception of the rendering tokens, most valid 
		<synph>chunk</synph> attributes apply only to the processing of composite
		(<term>ditabase</term>) topics. Where possible, avoid using composite topics,
		and instead use ditamaps. 
	 </note> 
	 <section id="section_444AFE9E2D0C412FA36AAD511CD30B2C"
	 audience="contributor"> 
		<title>Rationale</title> 
		<lq reftitle="XMLmind ditac documentation"
		href="http://www.xmlmind.com/ditac/_distrib/doc/manual/manual-4.html#chunking" scope="external" format="html">Specifying
		  the chunk and copy-to attributes on some topicref elements contained in a DITA
		  map allows to control the number and contents of the HTML pages(1) generated by
		  a DITA processor. The chunk attribute contains a list of values separated by
		  whitespace. Allowed values are: to-content (generate an HTML page)
		  to-navigation (purpose unclear) The following values are used to specify how
		  the basename of an HTML page is determined. by-document (use the basename of
		  the topic file) by-topic (use the value of the id attribute of the topic) Note
		  that the copy-to attribute allows to explicitly specify the basename of the
		  HTML page. The following values are used to specify the contents of a generated
		  HTML page. select-topic (add to the page the first topic of a file, but not any
		  of its nested topics) select-branch (add to the page the first topic of a file
		  as well as all its nested topics, if any) select-document (add to the page all
		  the topics contained in a DITA file, including all their nested topics, ie, add
		  everything) When the output format (PDF, RTF, etc) corresponds to a print
		  media: A single XSL-FO file is generated in all case. That is, the chunk and
		  copy-to attributes are completely ignored. 
		</lq> 
		<lq href="http://tech.groups.yahoo.com/group/dita-users/message/17564" scope="external" format="html"
		reftitle="Deborah Pickett, Yahoo! DITA Users Group">With a DITA-OT 1.5
		  installation, you've got the ability to use the chunk attribute. Stick the
		  attribute chunk="to-content" onto the top-level topicref in your map. This may
		  produce unexpected results if your subtopics have related links or footnotes.
		  Try it and see how you like it. 
		</lq> 
		<lq reftitle="Source unknown"> 
		  <p>Q. We want the topics to be chunked into html files, like this: &gt;
			 pgfid-1.html &lt;- has topic id="pgfid-1" and task id="pgfid-2" inside &gt;
			 pgfid-3.html &lt;- has topic id="pgfid-3" inside &gt; But we get the tasks
			 chunked as well: &gt; pgfid-1.html &lt;- topic id="pgfid-1" &gt; pgfid-2.html
			 &lt;- task id="pgfid-2" !didn't want that! &gt; pgfid-3.html &lt;- topic
			 id="pgfid-3" 
		  </p> 
		  <p>A. chunk="to-content select-topic" or chunk="by-topic select-topic" 
		  </p> 
		  <p>I believe the second value "select-topic" needs to be there in order
			 for the Toolkit to split them out into separate topics. 
		  </p> 
		</lq> 
	 </section> 
  </conbody> 
</concept> 
